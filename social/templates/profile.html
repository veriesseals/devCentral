{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="profile">
  <div class="avatar lg">
    {% if profile_user.profile.avatar %}
      <img src="{{ profile_user.profile.avatar.url }}" alt="{{ profile_user.username }}">
    {% else %}
      <img src="{% static 'img/avatar-default.png' %}" alt="avatar">
    {% endif %}
  </div>
</div>

<h2>@{{ profile_user.username }}</h2>
<p>{{ profile_user.first_name }} {{ profile_user.last_name }} â€¢ {{ profile_user.email }}</p>
<p>{{ profile_user.profile.bio }}</p>

{% if user.is_authenticated and user != profile_user %}
  {% if user in profile_user.profile.followers.all %}
    <form action="{% url 'unfollow' profile_user.username %}" method="post" class="inline-form">
      {% csrf_token %}
      <button type="submit" class="btn-unfollow">Unfollow</button>
    </form>
  {% else %}
    <form action="{% url 'follow' profile_user.username %}" method="post" class="inline-form">
      {% csrf_token %}
      <button type="submit" class="btn-follow">Follow</button>
    </form>
  {% endif %}
{% endif %}

{% if user.is_authenticated and user == profile_user %}
  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    <button class="btn" type="submit">Update Profile</button>
  </form>
{% endif %}

<hr>
<h3>Posts</h3>

{% for post in posts %}
  {% include "social/_post_item.html" with post=post %}
{% empty %}
  <p>No posts yet.</p>
{% endfor %}
{% endblock %}
